<!doctype html><html lang=en><link href="data:image/gif;base64,R0lGODlhEAAQAPH/AAAAAP8AAP8AN////yH5BAUAAAQALAAAAAAQABAAAAM2SLrc/jA+QBUFM2iqA2bAMHSktwCCWJIYEIyvKLOuJt+wV69ry5cfwu7WCVp2RSPoUpE4n4sEADs=" rel=icon><title>KISS - 09/02/2020: This week in KISS (#10)</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1.0"><meta name=Description content="An independent LinuxÂ® distribution with a focus on simplicity and the concept of less is more."><style>nav{line-height:2.5}body,h1,h2,h3,p,ul,blockquote{margin:1ch 0 0;padding:0}body{margin:1ch;overflow-y:scroll}img{height:auto;width:100%}body{font-family:monospace,monospace;line-height:1.6}nav{text-align:center}main,img{max-width:80ch;margin:0 auto}h1,h2,h3{font-size:inherit;margin:3ch 0 2ch}h1::before{content:"# "}h2::before{content:"## "}h3::before{content:"### "}ul{padding:0;list-style:none}ul>li::before,blockquote::before{float:left;width:1ch;margin-right:1ch;content:"-"}blockquote::before{content:">"}blockquote{background:#FFC}li>ul{margin:0 0 1ch 4ch}pre>code{display:block;padding:1ch 0 1ch 4ch;background:none;overflow-x:auto}code{border-radius:2px;background:#eee;padding:0 4px}a{text-decoration:none}a:hover{border-bottom:1px solid}h1::before,h2::before,h3::before{color:red}@media(prefers-color-scheme:dark){body{background:#000;color:#fff}a{color:#6CF}code,blockquote{background:#333}}</style><nav><a href=/><b>KISS</b></a><span style='color:#e60000'> ðŸ’‹</span> |
<a href=/news>News</a> |
<a href=/blog>Blog</a> |
<a href=/install><b>Install KISS</b></a> |
<a href=/scrots>Screenshots</a> |
<a href=/team>Team</a> |
<a href=/package-system>Package System</a> |
<a href=/testimonials>Testimonials</a> |
<a href=/projects>Software</a> |
<a href=https://github.com/kisslinux>GitHub</a> |
<a href=/guidestones>GUIDESTONES(<b>NEW</b>)</a> |
<a href=/contact>Contact</a> |
<a href=/donate>Donate</a></nav><main><h1>09/02/2020: This week in KISS (#10)</h1><p>More package manager goodies this week.</p><a href="/images/dylan02.jpg"><p><picture><source srcset="/images/dylan02.webp" type="image/webp"><img src="/images/dylan02.jpg" alt="dylan-scrot"></picture></p><p></a></p><h2 id="package-manager-build-hooks">Package Manager build hooks</h2><p>It is now possible to hook into specific "events" in the package manager with a script. Right now only <code>pre-build</code> and <code>post-build</code> are supported though I expect to see this list expand as users need them.</p><p>The <code>KISS_HOOK</code> environment variable takes the path to a shellscript which is then executed with three additional environment variables defined. Rather than needing a separate script per event, a single script is all that is required.</p><p>The following three environment variables are defined:</p><ul><li><code>$PKG</code>: The name of the package.</li><li><code>$TYPE</code>: The event type (valid: pre-build, post-build).</li><li><code>$DEST</code>: The path to where 'make install', etc will put the package.</li></ul><p>A simple script to set different <code>CFLAGS</code> for specific flags could look as follows.</p><pre><code>#!/bin/sh

case $TYPE in
    pre-build)
        case $PKG in
           zlib) export CFLAGS=&quot;-Os -static&quot; ;;
           curl) export CFLAGS=&quot;-O3&quot; ;;
        esac
    ;;

    post-build)
        # post-build code here.
    ;;
esac</code></pre><p>This paves the way for finer tuning of compilation settings for LTO and more aggressive compiler options. See: <a href="https://old.reddit.com/r/kisslinux/comments/f09c9k/aggressive_compiler_optimizations_under_kiss_linux/">/r/kisslinux post</a></p><h2 id="smarter-etc-handling">Smarter <code>/etc/</code> handling</h2><p>The package manager now performs a 3-way "handshake" to determine how it should handle the installation of files in <code>/etc</code>. In short, when a file cannot be overwritten due to user modifications it is installed as <code>$file.new</code>.</p><p>This is very similar to how Arch Linux handles <code>/etc</code> and it's a really nice way of doing things.</p><h2 id="kiss_audit">KISS_AUDIT</h2><p>A new opt-in feature has been added which will open a scrollable <code>diff</code> of every modified file for a system update. This was implemented to allow users to <em>easily</em> get a deeper insight as to what will happen during updates.</p><p>The repositories themselves <em>are</em><code>git</code> repositories so this is simply a <code>git diff</code> call post-fetch.</p><p>To enable this feature set <code>KISS_AUDIT</code> to <code>1</code>.</p><h2 id="gcc-static-pie-fix">GCC static-pie fix</h2><p>Our GCC builds enable <a href="https://en.wikipedia.org/wiki/Position-independent_code">PIE</a> by default though this wasn't applied when compiling statically. A patch was submitted by <a href="https://github.com/ioraff">Owen Rafferty</a> which fixes this issue.</p><p>To revert to the previous behavior the following <code>$CFLAGS</code> can be used <code>-fno-pie -no-pie</code>.</p><h2 id="changes-to-non-root-xorg">Changes to non-root Xorg</h2><p>Our default non-root Xorg configuration required the user be in the <code>input</code> group to function correctly. This is no longer a requirement and you may now remove yourself from the group.</p><p>Instead, our Xorg is now <code>setgid</code><code>input</code> which limits the permissions to <code>/dev/input</code> solely to Xorg. Any applications spawned under Xorg will not be able to read <code>/dev/input</code>.</p><p>This is a nicer and more secure default configuration.</p><h2 id="gnu-tar-and-bsd-tar-libarchive-support-added-to-the-package-manager">GNU tar and BSD tar (libarchive) support added to the package manager</h2><p>These two <code>tar</code> implementations are now supported in the package manager further reducing the dependence on <code>busybox</code>. I have found these to be faster than busybox's <code>tar</code> for those large source tarballs.</p><h2 id="official-repositories">Official Repositories</h2><ul><li><strong>Dylan Araps</strong>:
<ul><li><a href="https://github.com/kisslinux/repo/commit/f1db1cf"><code>f1db1cf</code></a> cryptsetup: bump to 5.67.0</li><li><a href="https://github.com/kisslinux/repo/commit/a9b34e1"><code>a9b34e1</code></a> libinput: bump to 1.15.1</li><li><a href="https://github.com/kisslinux/repo/commit/f86714c"><code>f86714c</code></a> busybox: Fix mdev.run. Closes #140</li><li><a href="https://github.com/kisslinux/repo/commit/eb4160f"><code>eb4160f</code></a> opendoas: bump to 6.6.1</li><li><a href="https://github.com/kisslinux/repo/commit/0751732"><code>0751732</code></a> glib: bump to 2.63.5</li><li><a href="https://github.com/kisslinux/repo/commit/2679adc"><code>2679adc</code></a> libarchive: new package at 3.4.1</li><li><a href="https://github.com/kisslinux/repo/commit/87629a8"><code>87629a8</code></a> busybox: fix checksums</li><li><a href="https://github.com/kisslinux/repo/commit/2a1127c"><code>2a1127c</code></a> kiss: bump to 1.2.0</li><li><a href="https://github.com/kisslinux/repo/commit/b9df4fa"><code>b9df4fa</code></a> kiss-utils: bump to 1.2.0</li><li><a href="https://github.com/kisslinux/repo/commit/6447193"><code>6447193</code></a> baseinit: bump to 0.4</li><li><a href="https://github.com/kisslinux/repo/commit/696613a"><code>696613a</code></a> cmake: bump to 3.16.4</li><li><a href="https://github.com/kisslinux/repo/commit/287bee5"><code>287bee5</code></a> kiss: bump to 1.2.1</li><li><a href="https://github.com/kisslinux/repo/commit/b476d52"><code>b476d52</code></a> kiss-utils: bump to 1.2.1</li><li><a href="https://github.com/kisslinux/repo/commit/2969c8c"><code>2969c8c</code></a> kiss: bump to 1.2.2</li><li><a href="https://github.com/kisslinux/repo/commit/dc2ee5c"><code>dc2ee5c</code></a> kiss-utils: bump to 1.2.2</li><li><a href="https://github.com/kisslinux/repo/commit/e486531"><code>e486531</code></a> nodejs: bump to 13.8.0</li><li><a href="https://github.com/kisslinux/repo/commit/ba246df"><code>ba246df</code></a> xorg-server: Run setgid. input group no longer needed per-user.</li><li><a href="https://github.com/kisslinux/repo/commit/ef7f7fc"><code>ef7f7fc</code></a> libinput: Remove post-install message</li><li><a href="https://github.com/kisslinux/repo/commit/e951a27"><code>e951a27</code></a> vim: don't link to util-linux</li><li><a href="https://github.com/kisslinux/repo/commit/662f59d"><code>662f59d</code></a> kiss: bump to 1.3.0</li><li><a href="https://github.com/kisslinux/repo/commit/891344b"><code>891344b</code></a> kiss-utils: bump to 1.3.0</li><li><a href="https://github.com/kisslinux/repo/commit/5611459"><code>5611459</code></a> baseinit: bump to 0.4.1</li><li><a href="https://github.com/kisslinux/repo/commit/1316592"><code>1316592</code></a> libSM: Remove util-linux dependency</li><li><a href="https://github.com/kisslinux/repo/commit/1fa3519"><code>1fa3519</code></a> vim: remove unused flag</li><li><a href="https://github.com/kisslinux/repo/commit/d4c1ea6"><code>d4c1ea6</code></a> glib: Remove util-linux dependency</li><li><a href="https://github.com/kisslinux/repo/commit/ccf9ffb"><code>ccf9ffb</code></a> gdk-pixbuf: Don't build tests</li><li><a href="https://github.com/kisslinux/repo/commit/84e7d60"><code>84e7d60</code></a> gtk+3: Don't install tests</li><li><a href="https://github.com/kisslinux/repo/commit/5901fbf"><code>5901fbf</code></a> python: remove util-linux dependency</li><li><a href="https://github.com/kisslinux/repo/commit/bbec1d1"><code>bbec1d1</code></a> kiss: bump to 1.3.1</li><li><a href="https://github.com/kisslinux/repo/commit/5ea31f6"><code>5ea31f6</code></a> kiss-utils: bump to 1.3.1</li><li><a href="https://github.com/kisslinux/repo/commit/3a38408"><code>3a38408</code></a> nss: bump to 3.50</li><li><a href="https://github.com/kisslinux/repo/commit/66c8f14"><code>66c8f14</code></a> meta: Move non-xorg related packages out of xorg/</li><li><a href="https://github.com/kisslinux/repo/commit/3d47a77"><code>3d47a77</code></a> xorg: Drop www. from sources</li><li><a href="https://github.com/kisslinux/repo/commit/99d840e"><code>99d840e</code></a> eiwd: move to extra</li><li><a href="https://github.com/kisslinux/repo/commit/5ea359f"><code>5ea359f</code></a> gdk-pixbuf: Remove shared-mime-info dependency</li><li><a href="https://github.com/kisslinux/repo/commit/dcacfe9"><code>dcacfe9</code></a> gtk+3: Remove shared-mime-info dependency</li><li><a href="https://github.com/kisslinux/repo/commit/7621366"><code>7621366</code></a> gtk+2: remove shared-mime-info dependency</li><li><a href="https://github.com/kisslinux/repo/commit/8c7acc6"><code>8c7acc6</code></a> e2fsprogs: Remove util-linux dependency</li><li><a href="https://github.com/kisslinux/repo/commit/96ad6fb"><code>96ad6fb</code></a> gcc: bump version for libgomp and static-pie fixes.</li><li><a href="https://github.com/kisslinux/repo/commit/cbbbf9b"><code>cbbbf9b</code></a> kiss: bump to 1.4.0</li><li><a href="https://github.com/kisslinux/repo/commit/1dc1377"><code>1dc1377</code></a> kiss-utils: bump to 1.4.0</li><li><a href="https://github.com/kisslinux/repo/commit/b2a5d52"><code>b2a5d52</code></a> json-c: fix depends. Closes #143 by <span class="citation" data-cites="artemkobets">@artemkobets</span></li><li><a href="https://github.com/kisslinux/repo/commit/0cbdf32"><code>0cbdf32</code></a> xf86-video-ati: Fix rootless xorg</li><li><a href="https://github.com/kisslinux/repo/commit/e67a209"><code>e67a209</code></a> extra-cmake-modules: bump to 5.67.0</li><li><a href="https://github.com/kisslinux/repo/commit/6e64fb7"><code>6e64fb7</code></a> kiss: bump to 1.4.1</li><li><a href="https://github.com/kisslinux/repo/commit/cfbe193"><code>cfbe193</code></a> kiss-utils: bump to 1.4.1</li><li><a href="https://github.com/kisslinux/repo/commit/1a9ada8"><code>1a9ada8</code></a> opendoas: added new doas.conf for latest kiss</li><li><a href="https://github.com/kisslinux/repo/commit/eecc3f2"><code>eecc3f2</code></a> grub: Fix build after GCC changes</li></ul></li></ul><h2 id="community">Community</h2><ul><li><strong>Adam Schaefers</strong>:
<ul><li><a href="https://github.com/kisslinux/community/commit/0483840"><code>0483840</code></a> strace: bump to 5.5 (#319)</li><li><a href="https://github.com/kisslinux/community/commit/2edfb7b"><code>2edfb7b</code></a> gawk: bump to 5.0.1 (#318)</li></ul></li><li><strong>Anirudh</strong>:
<ul><li><a href="https://github.com/kisslinux/community/commit/a915d2d"><code>a915d2d</code></a> gdb: new package at 8.3.1 (#300)</li></ul></li><li><strong>Artem Kobets</strong>:
<ul><li><a href="https://github.com/kisslinux/community/commit/8f9db40"><code>8f9db40</code></a> slmenu: new package at 0.1 (#310)</li><li><a href="https://github.com/kisslinux/community/commit/59ce0e6"><code>59ce0e6</code></a> xmlsec1: new package at 1.2.29 (#316)</li><li><a href="https://github.com/kisslinux/community/commit/f38228e"><code>f38228e</code></a> oath-toolkit: new package at 2.6.2 (#317)</li></ul></li><li><strong>Bridouz</strong>:
<ul><li><a href="https://github.com/kisslinux/community/commit/90ba99a"><code>90ba99a</code></a> fff: fix depends (#305)</li><li><a href="https://github.com/kisslinux/community/commit/b512ccf"><code>b512ccf</code></a> ntfs-3g: new packages at 2017.3.23 (#306)</li><li><a href="https://github.com/kisslinux/community/commit/11dd377"><code>11dd377</code></a> syncthing: new package at 1.3.4 (#308)</li></ul></li><li><strong>Cem Keylan</strong>:
<ul><li><a href="https://github.com/kisslinux/community/commit/7488c6a"><code>7488c6a</code></a> lazygit: bump to 0.14 (#309)</li><li><a href="https://github.com/kisslinux/community/commit/f687a7a"><code>f687a7a</code></a> sinit: build without depending on ubase (#276)</li></ul></li><li><strong>CÃ©dric</strong>:
<ul><li><a href="https://github.com/kisslinux/community/commit/5ef22f8"><code>5ef22f8</code></a> Update poppler-glib to 0.85.0 (#301)</li><li><a href="https://github.com/kisslinux/community/commit/bf05708"><code>bf05708</code></a> New package: poppler at 0.85.0 and removal of poppler-glib (#314)</li></ul></li><li><strong>Dylan Araps</strong>:
<ul><li><a href="https://github.com/kisslinux/community/commit/2907091"><code>2907091</code></a> weechat: Fix depends. Closes #302</li><li><a href="https://github.com/kisslinux/community/commit/e65c6c0"><code>e65c6c0</code></a> sbase: Nitpicks</li><li><a href="https://github.com/kisslinux/community/commit/6cbd09a"><code>6cbd09a</code></a> ubase: Nitpicks</li><li><a href="https://github.com/kisslinux/community/commit/8b4b029"><code>8b4b029</code></a> nano: bump to 4.8</li><li><a href="https://github.com/kisslinux/community/commit/0865af5"><code>0865af5</code></a> bash: bump to 5.0.p16</li><li><a href="https://github.com/kisslinux/community/commit/28eb81c"><code>28eb81c</code></a> libgpg-error: bump to 1.37</li><li><a href="https://github.com/kisslinux/community/commit/0782430"><code>0782430</code></a> imagemagick: bump to 7.0.9-22</li></ul></li><li><strong>M. Herdiansyah</strong>:
<ul><li><a href="https://github.com/kisslinux/community/commit/795969a"><code>795969a</code></a> mawk: new package at 1.3.4-20200120 (#313)</li></ul></li><li><strong>Owen Rafferty</strong>:
<ul><li><a href="https://github.com/kisslinux/community/commit/61f1da0"><code>61f1da0</code></a> sbase: respect environmental vars, fix static linking (#303)</li><li><a href="https://github.com/kisslinux/community/commit/fd16383"><code>fd16383</code></a> ubase: respect LDFLAGS (#304)</li></ul></li><li><strong>Will Eccles</strong>:
<ul><li><a href="https://github.com/kisslinux/community/commit/fb4d26b"><code>fb4d26b</code></a> cfm: update to 0.4.4 (#295)</li><li><a href="https://github.com/kisslinux/community/commit/f4f6290"><code>f4f6290</code></a> cfm: update to 0.4.5 (#312)</li></ul></li></ul><footer style='clear:both'><h3>Legal stuff</h3><div><p>The registered trademark LinuxÂ® is used pursuant to a sublicense from the Linux Foundation, the exclusive licensee of Linus Torvalds, owner of the mark on a worldÂ­wide basis.</p><p>Â© <a href="https://github.com/dylanaraps">Dylan Araps</a> 2019-2020</p></div></footer></main>
