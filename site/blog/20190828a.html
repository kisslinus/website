<!doctype html><html lang=en><link href="data:image/gif;base64,R0lGODlhEAAQAPH/AAAAAP8AAP8AN////yH5BAUAAAQALAAAAAAQABAAAAM2SLrc/jA+QBUFM2iqA2bAMHSktwCCWJIYEIyvKLOuJt+wV69ry5cfwu7WCVp2RSPoUpE4n4sEADs=" rel=icon><title>KISS - 28/08/2019: Firefox 69 now fully depends on dbus</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1.0"><meta name=Description content="An independent LinuxÂ® distribution with a focus on simplicity and the concept of less is more."><style>nav{line-height:2.5}body,h1,h2,h3,p,ul,blockquote{margin:1ch 0 0;padding:0}body{margin:1ch;overflow-y:scroll}img{height:auto;width:100%}body{font-family:monospace,monospace;line-height:1.6}nav{text-align:center}main,img{max-width:80ch;margin:0 auto}h1,h2,h3{font-size:inherit;margin:3ch 0 2ch}h1::before{content:"# "}h2::before{content:"## "}h3::before{content:"### "}ul{padding:0;list-style:none}ul>li::before,blockquote::before{float:left;width:1ch;margin-right:1ch;content:"-"}blockquote::before{content:">"}blockquote{background:#FFC}li>ul{margin:0 0 1ch 4ch}pre>code{display:block;padding:1ch 0 1ch 4ch;background:none;overflow-x:auto}code{border-radius:2px;background:#eee;padding:0 4px}a{text-decoration:none}a:hover{border-bottom:1px solid}h1::before,h2::before,h3::before{color:red}@media(prefers-color-scheme:dark){body{background:#000;color:#fff}a{color:#6CF}code,blockquote{background:#333}}</style><nav><a href=/><b>KISS</b></a><span style='color:#e60000'> ðŸ’‹</span> |
<a href=/news>News</a> |
<a href=/blog>Blog</a> |
<a href=/install><b>Install KISS</b></a> |
<a href=/scrots>Screenshots</a> |
<a href=/team>Team</a> |
<a href=/package-system>Package System</a> |
<a href=/testimonials>Testimonials</a> |
<a href=/projects>Software</a> |
<a href=https://github.com/kisslinux>GitHub</a> |
<a href=/guidestones>GUIDESTONES(<b>NEW</b>)</a> |
<a href=/contact>Contact</a> |
<a href=/donate>Donate</a></nav><main><h1>28/08/2019: Firefox 69 now fully depends on dbus</h1><p>The upcoming Firefox release now depends on <code>dbus</code> and this dependency can't be disabled. The usual <code>--disable-dbus</code> option has no effect.</p><p>Until this is fixed upstream or we find a way to patch this out KISS will be swapping to the next ESR release of Firefox (68.0.2 -&gt; 68.1.0). This gives us a little over a year to sort out this situation.</p><p>With the release of Firefox 70 ALSA support will also be dropped from Firefox and we will have to ship <code>apulse</code> with KISS to fix this.*</p><p>It seems to be getting harder and harder to run and maintain a system which doesn't follow the usual trend of software choices. Firefox even has a <code>dbus</code> dependency on FreeBSD and OpenBSD!</p><p>The upstream bug report can be found here: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1561207">#1561207</a></p><p>*: Update: On inspection of the Firefox 71 beta, ALSA is still supported!</p><h2 id="update-nov-3-2019">Update (<em>Nov 3 2019</em>)</h2><p>I have written a patch to remove the <code>dbus</code> requirement in versions <strong>69.0</strong> to <strong>71.0</strong> beta. Firefox in KISS works 100% fine <em>without</em><code>dbus</code>!</p><ul><li>Firefox 71.0 beta: <a href="https://github.com/kisslinux/repo/blob/ded0a8fc3e2800a579a2ed7df850e619a113c8eb/testing/firefox/patches/firefox-71-no-dbus.patch">patch</a></li><li>Firefox 70.0: <a href="https://github.com/kisslinux/repo/blob/a71e02ef014d044ab3e8c0938003b4183c3e26fc/extra/firefox/patches/firefox-70-no-dbus.patch">patch</a></li><li>Firefox 69.0.2: <a href="https://github.com/kisslinux/repo/blob/a7e7f001cd829f9e177fc93959dfcdd0d6749014/extra/firefox/patches/firefox-69.0.2-no-dbus.patch">patch</a></li><li>Firefox 69.0: <a href="https://github.com/kisslinux/repo/blob/aa24ba44e318f5fbb85eea5fe14c908b24cab6fb/extra/firefox/patches/firefox-69-no-dbus.patch">patch</a></li></ul><h3 id="why-did---disable-dbus-break">Why did --disable-dbus break?</h3><p>Firefox 69.0 added a new audio feature called "audio_thread_priority" to prioritize audio threads. On Linux, this uses <code>dbus</code> to function.</p><p>Firefox has historically always provided the <code>--disable-dbus</code> option to remove the requirement. It has always been optional. The feature works in its entirety <strong>minus</strong> the new <code>audio_thread_priority</code> code.</p><p>No (<em>or little</em>) testing was done with the <code>--disable-dbus</code> configure flag and this is marked as a <strong>defect</strong> in the upstream bug report (<em>which gives me hope that it'll be fixed</em>).</p><p>My patch to workaround this issue simply disables the <code>audio_thread_priority</code> feature which removes the <code>dbus</code> requirement and effectively reverts audio to how it was prior to version 69.0.</p><p>The upstream bug report can be found here: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1561207">#1561207</a></p><footer style='clear:both'><h3>Legal stuff</h3><div><p>The registered trademark LinuxÂ® is used pursuant to a sublicense from the Linux Foundation, the exclusive licensee of Linus Torvalds, owner of the mark on a worldÂ­wide basis.</p><p>Â© <a href="https://github.com/dylanaraps">Dylan Araps</a> 2019-2020</p></div></footer></main>
